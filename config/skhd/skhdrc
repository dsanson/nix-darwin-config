# depends on
#  bar_colors visor layouts opacity kitty-wrapper
#  yabai
#  firefox-wrapper fb-rotate 
#  screenrecording webcam 
# modes
 :: default : bar_colors background
 :: m1 @ : bar_colors 1 
 :: m2 @ : bar_colors 2
# toggle between modes
ctrl - s             ; m1 
m1 < ctrl - s        ; m2
m2 < ctrl - s    ->  : skhd -k 'escape'
m1, m2 < escape ; default
m1, m2 < i      ; default
# tiling mode
m1 < a            :  yabai -m space --layout bsp
m1 < s            :  yabai -m space --layout stack
m1 < d            :  yabai -m space --layout float
# rotate window tree
m1 < space		:   yabai -m space --rotate 90  
# equalize window sizes
m1 < 0x18   : yabai -m space --balance
# fullscreen window
#m1 < z     : skhd -k 'escape'; yabai -m window --toggle zoom-fullscreen
# zoom-parent toggle
m1 < p    : yabai -m window --toggle zoom-parent
# float window
m1 < f    : yabai -m window --toggle float 
# pip window
m2 < p : yabai -m window --toggle topmost --toggle sticky --toggle float --grid 3:3:3:0:0:0 --opacity (yabai -m query --windows --window | jq -r '(.opacity - 0.5) * 10 | tostring | "0." + .')
# cycle layouts
m2 < c : layouts cycle
# adjust opacity
m2 < o : opacity toggle
m2 < shift - o : yabai -m window --opacity (yabai -m query --windows --window | jq -r '(.opacity - 0.5) * 10 | tostring | "0." + .')
# window focus
m1 < h   : yabai -m window --focus west  
m1 < l   : yabai -m window --focus east   
m1 < j   : yabai -m window --focus south   
m1 < k   : yabai -m window --focus north   
#m1 < n   : yabai -m window --focus next 
# window swap
m2 < h   : yabai -m window --swap west   
m2 < l   : yabai -m window --swap east   
m2 < j   : yabai -m window --swap south   
m2 < k   : yabai -m window --swap north   
# change spaces 
m1 < left  : yabai -m space --focus prev || yabai -m space --focus last
m1 < right : yabai -m space --focus next || yabai -m space --focus first
m1 < 1 : yabai -m space --focus 1
m1 < 2 : yabai -m space --focus 2
m1 < 3 : yabai -m space --focus 3
m1 < 4 : yabai -m space --focus 4
m1 < 5 : yabai -m space --focus 5
m1 < 6 : yabai -m space --focus 6
m1 < 7 : yabai -m space --focus 7
m1 < 8 : yabai -m space --focus 8
m1 < 9 : yabai -m space --focus 9
# send window to space and follow focus
m2 < left : yabai -m window --space prev; yabai -m space --focus prev
m2 < right : yabai -m window --space next; yabai -m space --focus next
m2 < 1 : yabai -m window --space 1; yabai -m space --focus 1
m2 < 2 : yabai -m window --space 2; yabai -m space --focus 2
m2 < 3 : yabai -m window --space 3; yabai -m space --focus 3
m2 < 4 : yabai -m window --space 4; yabai -m space --focus 4
m2 < 5 : yabai -m window --space 5; yabai -m space --focus 5
m2 < 6 : yabai -m window --space 6; yabai -m space --focus 6
m2 < 7 : yabai -m window --space 7; yabai -m space --focus 7
m2 < 8 : yabai -m window --space 8; yabai -m space --focus 8
m2 < 9 : yabai -m window --space 9; yabai -m space --focus 9
# move space to recent display
m2 < space :  yabai -m space --display next || yabai -m space --display first
# move focus to other monitor 
m1 < up    : yabai -m display --focus prev || yabai -m display --focus last
m1 < down    : yabai -m display --focus next || yabai -m display --focus first
# # move window to other monitor 
m2 < up : yabai -m window --display prev; yabai -m display --focus prev
m2 < down : yabai -m window --display next; yabai -m display --focus next 
# open kitty
default < cmd - return : kitty-wrapper
m1, m2 < cmd - return : skhd -k 'escape'; kitty-wrapper
# open quicksilver and spotlight
m1, m2 < cmd - space : skhd -k 'escape'; skhd -k 'cmd - space'
m1, m2 < cmd + alt - space : skhd -k 'escape'; skhd -k 'cmd + alt - space'
# open firefox windows
m1 < b   :  skhd -k "escape"; firefox-wrapper &
m2 < b   :  skhd -k "escape"; firefox-wrapper --private-window &
# screen capture
m1 < c      :  skhd -k "escape"; open -a Screenshot
# screenrecording
#m1 < f5 : skhd -k 'escape'; $HOME/bin/screenrecording -d $HOME/Movies/screen -o capture
#m1 < f6 : skhd -k 'escape'; $HOME/bin/webcam corner
#m1 < f7 : skhd -k 'escape'; $HOME/bin/webcam doc
# lock screen
# caffeinate
m1 < shift - c : skhd -k 'escape'; open "keepingyouawake:///toggle"
# rotate external monitor
m1 < r    :  rotate external-home; rotate external-office
m1 < shift - r    :  rotate external-home clockwise; rotate external-office clockwise
# reload all services
m2 < r            : skhd -k 'escape'; launchctl stop org.nixos.yabai; launchctl stop org.nixos.sketchybar; launchctl stop org.nixos.skhd
# reload just sketchybar
m2 < s            : skhd -k 'escape'; launchctl stop org.nixos.sketchybar
# q script to replace quicksilver
#default < ctrl -space : yabai -m window --toggle visor || kitty @ launch --type os-window --os-window-title visor --to unix:/tmp/mykitty q -w
#default < ctrl - space : kitten @ --to=unix:/tmp/panel resize-os-window --action=toggle-visibility || kitten panel -o allow_remote_control=socket-only --listen-on=unix:/tmp/panel --detach --layer top --hide-on-focus-loss --edge center-sized --lines 30 --columns 100 --config /Users/desanso/.config/q/kitty.conf fish -c "q -w"
default < ctrl - space : kitten quick-access-terminal -o hide_on_focus_loss=yes -o edge=center-sized -o lines=30 -o columns=100 q -w
m1, m2 < ctrl -space : skhd- k 'escape'; kitten @ --to=unix:/tmp/panel resize-os-window --action=toggle-visibility || kitten panel -o allow_remote_control=socket-only --listen-on=unix:/tmp/panel --detach --layer top --hide-on-focus-loss --edge center-sized --lines 30 --columns 100 --config /Users/desanso/.config/q/kitty.conf fish -c "q -w"
m1 < n : skhd -k 'escape'; kitten @ --to=unix:/tmp/visor resize-os-window --action=toggle-visibility || kitten panel -o allow_remote_control=socket-only --listen-on=unix:/tmp/visor --layer top --hide-on-focus-loss --edge center-sized --lines 30 --columns 90 fish -c "note"
#m1 < u : skhd -k "escape"; bash -x uplift sit
#m1 < shift - u : skhd -k "escape"; bash -x uplift stand
m1 < u : skhd -k "escape"; echo 1 >> /tmp/com.davidsanson.upliftdesk.in
m1 < shift - u : skhd -k "escape"; echo 2 >> /tmp/com.davidsanson.upliftdesk.in
